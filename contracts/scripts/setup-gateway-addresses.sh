#!/bin/bash
# Setup script to create GatewayAddresses.sol stub for Forge compilation
# This file is auto-generated by Hardhat during deployment, but we need
# a stub version for Forge/Foundry to resolve imports properly

set -e

ADDRESSES_DIR="lib/fhevm/gateway-contracts/addresses"
ADDRESSES_FILE="${ADDRESSES_DIR}/GatewayAddresses.sol"
MOCK_ADDRESSES_FILE="src/mocks/GatewayAddressesMock.sol"

# Create the directory if it doesn't exist
mkdir -p "${ADDRESSES_DIR}"

# Check if the file already exists
if [[ -f ${ADDRESSES_FILE} ]]; then
	echo "✓ GatewayAddresses.sol already exists at ${ADDRESSES_FILE}"
	exit 0
fi

cp "${MOCK_ADDRESSES_FILE}" "${ADDRESSES_FILE}"
echo "✓ Created ${ADDRESSES_FILE}"
